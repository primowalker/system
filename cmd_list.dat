Tag:Description:Command
user;account;locked;pam_tally:Check to see if the account has been locked.:pam_tally --user <user id>
user;account;locked;pam_tally:To unlock the account.:pam_tally --user <user id> --reset
user;account;locked;vastood;AD:Check user status in vastool.:/opt/quest/bin/vastool user checkaccess f8tg2la
user;account;locked;vastood;AD:If vastool gives an error or doesn't return anything when checking the user status,  then restart the service.:/etc/init.d/vasd stop|start
file size;files;size;find:Check for files larger than a certain size:find /data -xdev -type f -size +1000000 -exec ls -al {} \;
linmon;owership;filesystem:To find out who owns a file system,  look here:/opt/admin/linom/linmon_mntpts_teams.txt
size;files;directories;du;space;usage;sort;awk;sort:Get the sizes of files and directories and sort them from smallest to largest.:du -sk * | awk '{size = $1/1024 ; print size" MB" "\t" $2}' | sort -n
clientmqueue;space;cleanup;find:To clean up /var/spool/clientmqueuecd /var/spool/clientmqueue: find . -type f | xargs rm
file;zero out;size:To zero out a file without deleting it:> FILENAME
mounted;filesystems;listing;df;sort:Get a listing of the mounted file systems and sort by % used:df -h | grep -v platform | awk '{print $5 "\t" $6}' | sort -n
swap;top 10;ps;awk;sort:Get the top 10 processes using the most swap space in MB:ps -eo vsz,user,pid,args | sort -nr | head | awk '{sum = $1/1024 ; print sum"M" "\t" $2 "\t" $3 "\t" $4}'
swap;top 10;ps;awk;sort:Get the top 10 processes using the most swap space in GB:ps -eo vsz,user,pid,args | sort -nr | head | awk '{sum = $1/1024/1024 ; print sum"G" "\t" $2 "\t" $3 "\t" $4}'
swap;percentage;usage:Get the total percentage of swap being used:swap_size=`top | head -5 | grep Swap | awk '{print $2}' | sed 's/k//g' | sed 's/M//g'`;swap_used=`top | head -5 | grep Swap | awk '{print $4}' | sed 's/k//g' | sed 's/M//g'`;echo;swap_perctage_used=`bc <<< "scale = 2;$swap_used / $swap_size"`;echo -e "The percentage of swap used is - $swap_perctage_used"
swap;devices:Get a list of current swap devices:swapon -s | grep -v File | awk '{ size = $3 /1024 ; print $1 "\t" size"G"}'
memory;top 10;processes;ps;awk:Get the top 10 processes using the most memory: ps aux --sort=-pmem | head -10
cpu;top 10;processes;awk;head:Get the top 10 processes using the most CPU:ps aux --sort=-pcpu | head -10 | awk '{print $1 "\t" $2 "\t" $3 "\t" $11}'
cpu;usage;sar:Get a quick CPU usage history from sar:sar | awk '{sum = 100 - $8 ; print $1 "\t" sum"%"}'
cpu;usage;percentage;total:Get total percentage of CPU used:vmstat | grep -v procs | grep -v swp | awk '{sum = 100 - $15 ; print "CPU Usage - "sum"%"}'
network;route;routes;static;ip:To see static routes:ip route
network;port;connectivity;nc:Test connectivity to a port:nc -zv $HOST $PORT
ps;realtime;process;ps:Use ps as a realtime process viewer:watch -n 1 'ps -e -o pid,uname,cmd,pmem,pcpu --sort=-pmem,-pcpu | head -15'
path;process;ps:Get the full path to a process:ps auxwe | grep PID
vi;DOS;line feed;carrage return;non-printable;characters:To run vi show DOS line feed:vi -b
find;compress;logs;log files;numbered;gzip:Find and compress numbered log files:find . -name '*.[0-9]*' | grep -v gz | grep -v bz | xargs gzip -9
xargs;find:Use xargs with find:find . -type f | xargs tar -czvf backup.tar.gz
search;text;multiple files;exclude;binary;var;log:Search for text in multiple files,  but exclude binary files. Very nice when searching through multiple log files in /var/log.:find . -type f -exec grep -Il sysmon {} \;
startup;shutdown;init;init.d;insserv;chkconfig:To add a startup/shutdown script:Copy the script to /etc/init.d.  For SLES run - insserv $SCRIPT. For RedHat/Cent OS run - chkconfig -add $SCRIPT
remove;empty;lines;grep;sed:To remove empty lines in output:grep -v \# <file> | sed '/^\s*$/d'
remove to end of line;sed:To remove everything from a character or string to the end of the line. NOTE - The period before the wildcard * and the end of line $ is important!:sed 's/MyVar.*$//g'
kill;jobs;stopped:To kill a stopped job,  where %X is the job number from the output of the jobs command:kill %X
clean;postfix;queue:To clean the queue of the postfix mail server:postfix f
remove;line numbers;diff:Remove the line numbers from diff output:diff file1 file2 | grep -v "^---" | grep -v "^[0-9c0-9]"
remove;<>;diff:Remove <> characters from diff output:diff file1 file2 | sed 's/<//g' | sed 's/>//g'
grep;<>:Grep for "<" and/or ">":grep '<\|>'
grep;servers;build:Grep in a server list for build:cat ssh_servers | grep -E '^(n|r|d)(1|3)b'
grep;servers;cat:Grep in a server list for CAT:cat ssh_servers | grep -E '^(n|r|d)(1|3)c'
grep;servers;dev:Grep in a server list for dev:cat ssh_servers | grep -E '^(n|r|d)(1|3)d'
grep;servers;prod:Grep in a server list for prod:cat ssh_servers | grep -E '^(n|r|d)(1|3)p'
grep;servers;qa:Grep in a server list for QA:cat ssh_servers | grep -E '^(n|r|d)(1|3)q'
grep;servers;test:Grep in a server list for test:cat ssh_servers | grep -E '^(n|r|d)(1|3)t'
get random files;ssh_servers;sort;grep;head:Get a certain number of random servers from ssh_servers file,  i.e. - get 500 random servers:sort -R ssh_servers | grep -iv '^a' | grep -iv '^s' | grep -iv '^w' | head -n 500
